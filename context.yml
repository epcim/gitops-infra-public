# globals
env: {{ target.name }}
internal_domain: apealive.net
external_domain: apealive.net


# library charts, repos
helm:
  bjws:
    # https://github.com/bjw-s/helm-charts app-template
    chartVersion: 1.3.2
  bitnami:
    # https://github.com/bitnami/charts %%CHART_NAME%%
    chartVersion: 0.1.0
  truecharts:
    # https://library-charts.truecharts.org
    chartVersion: 11.1.2

# enabled services
services:
  {% if args.oneshot %}
  - {{ args.oneshot }}
  {% else %}
  - adguard
  - argocd
  - esphome
  - falco
  - falco-exporter
  - gita
  - grafana
  - hajimari
  - hass
  - jellyfin
  - prometheus
  - influxdb
  - loki
  - minio-backup
  - octoprint
  {% endif %}
  # TODO switch:
  # - longhorn
  # - metallb
  # - node-feature-discover
  # - syncthing
  # - thanos
  # - traefik
  # - unifi
  # TODO develop:
  # - tinkerbell + dual DNS
  # - restic
  # - restic-server


# parameters
params: &params
  argocd:
    bootstrap: false
    namespace: gitops
  haas:
    namespace: home
  traefik:
    namespace: kube-system
  falco:
    namespace: sec
<<: *params


# cluster parameters
kube:
  ingress:
    class: traefik
    annotations: |-
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      traefik.ingress.kubernetes.io/router.tls: "true"
  namespaces:
    - game
    - gitops
    - home
    - iot
    - kube
    - log
    - media
    - mon
    - mon2
    - net
    # cluster level
    - longhorn-system
    - sec
    - sys
    - sto
